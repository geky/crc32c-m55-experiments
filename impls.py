#!/usr/bin/env python
#
# I got tired of copy-pasting function declarations, this generates a file
# with name+function for each implementation
#

def main(*args):
    print('//// AUTOGENERATED ////')
    print('#include <stdint.h>')
    print('#include <stddef.h>')
    print('struct impl {')
    print('    const char *name;')
    print('    uint32_t (*crc32c)('
            'uint32_t crc, const void *data, size_t size);')
    print('};')
    for impl in args:
        print('extern uint32_t %(impl)s('
                'uint32_t crc, const void *data, size_t size);'
                % dict(impl=impl))
    print('const struct impl impls[] = {')
    for impl in args:
        print('    {"%(impl)s", %(impl)s},' % dict(impl=impl))
    print('    {NULL, NULL},' % dict(impl=impl))
    print('};')

if __name__ == "__main__":
    import sys
    main(*sys.argv[1:])


